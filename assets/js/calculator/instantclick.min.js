/* InstantClick 3.0 | (C) 2014 Alexandre Dieulot | http://instantclick.io/license.html */
const InstantClick = (function (e, g) {
  function v(a) { const c = a.indexOf('#'); return c < 0 ? a : a.substr(0, c); } function y(a) { for (;a.nodeName != 'A';)a = a.parentNode; return a; } function t(a, c) { for (let b = 0; b < D[a].length; b++)D[a][b](c); } function G(a, c, b, l) {
    e.title = a; e.documentElement.replaceChild(c, e.body); if (b) { history.pushState(null, null, b); a = b.indexOf('#'); a = a > -1 && e.getElementById(b.substr(a + 1)); c = 0; if (a) for (;a.offsetParent;)c += a.offsetTop, a = a.offsetParent; scrollTo(0, c); m = v(b); } else scrollTo(0, l); H(); z.done(); t('change',
      !1);
  } function I(a) { w(y(a.target).href); } function J(a) { a = y(a.target); a.addEventListener('mouseout', Q); E ? (K = a.href, r = setTimeout(w, E)) : w(a.href); } function R(a) { a = y(a.target); A ? a.removeEventListener('mousedown', I) : a.removeEventListener('mouseover', J); w(a.href); } function S(a) { a.which > 1 || a.metaKey || a.ctrlKey || (a.preventDefault(), L(y(a.target).href)); } function Q() { r ? (clearTimeout(r), r = !1) : u && !h && (p.abort(), h = u = !1); } function T() {
    if (!(p.readyState < 4) && p.status != 0) {
      q.ready = +new Date() - q.start; t('receive'); if (p.getResponseHeader('Content-Type').match(/\/(x|ht|xht)ml/)) {
        var a = e.implementation.createHTMLDocument(''); a.documentElement.innerHTML = p.responseText; F = a.title; x = a.body; var c = v(s); f[c] = { body: x, title: F, scrollY: c in f ? f[c].scrollY : 0 }; for (var a = a.head.children, c = 0, b, l = a.length - 1; l >= 0; l--) if (b = a[l], b.hasAttribute('data-instant-track')) { b = b.getAttribute('href') || b.getAttribute('src') || b.innerHTML; for (let n = B.length - 1; n >= 0; n--)B[n] == b && c++; }c != B.length && (C = !0);
      } else C = !0; h && (h = !1, L(s));
    }
  } function H(a) {
    for (var c = e.getElementsByTagName('a'), b, l = `${g.protocol}//${g.host}`, n = c.length
- 1; n >= 0; n--) {
      b = c[n]; var d; if (!((d = b.target) || (d = b.hasAttribute('download')) || (d = b.href.indexOf(`${l}/`) != 0) || (d = b.href.indexOf('#') > -1 && v(b.href) == m))) if (M) { a: { d = b; do { if (!d.hasAttribute) break; if (d.hasAttribute('data-no-instant')) break; if (d.hasAttribute('data-instant')) { d = !0; break a; } } while (d = d.parentNode); d = !1; }d = !d; } else a: { d = b; do { if (!d.hasAttribute) break; if (d.hasAttribute('data-instant')) break; if (d.hasAttribute('data-no-instant')) { d = !0; break a; } } while (d = d.parentNode); d = !1; }d || (b.addEventListener('touchstart',
        R), A ? b.addEventListener('mousedown', I) : b.addEventListener('mouseover', J), b.addEventListener('click', S));
    } if (!a) for (a = e.body.getElementsByTagName('script'), n = 0, j = a.length; n < j; n++)c = a[n], c.hasAttribute('data-no-instant') || (b = e.createElement('script'), c.src && (b.src = c.src), c.innerHTML && (b.innerHTML = c.innerHTML), l = c.parentNode, d = c.nextSibling, l.removeChild(c), l.insertBefore(b, d));
  } function w(a) {
    if (A || !('display' in q && +new Date() - (q.start + q.display) < 100)) {
      if (r && (clearTimeout(r), r = !1), a || (a = K), !u || a != s && !h) {
        u = !0, h = !1, s = a, C = x = !1, q = { start: +new Date() }, t('fetch'), p.open('GET', a), p.send();
      }
    }
  } function L(a) { 'display' in q || (q.display = +new Date() - q.start); r ? s && s != a ? g.href = a : (w(a), z.start(0, !0), t('wait'), h = !0) : !u || h ? g.href = a : C ? g.href = s : x ? (f[m].scrollY = pageYOffset, h = u = !1, G(F, x, s)) : (z.start(0, !0), t('wait'), h = !0); } const N = navigator.userAgent; const O = 'createTouch' in e; let m; let K; let r; var f = {}; let p; var s = !1; var F = !1; var C = !1; var x = !1; var q = {}; var u = !1; var h = !1; var B = []; let M; let A; let E; var D = {
    fetch: [], receive: [], wait: [], change: [],
  }; var z = (function () {
    function a(a, d) {
      f = a; e.getElementById(k.id) && e.body.removeChild(k);
      k.style.opacity = '1'; e.getElementById(k.id) && e.body.removeChild(k); l(); d && setTimeout(c, 0); clearTimeout(m); m = setTimeout(b, 500);
    } function c() { f = 10; l(); } function b() { f += 1 + 2 * Math.random(); f >= 98 ? f = 98 : m = setTimeout(b, 500); l(); } function l() { g.style[h] = `translate(${f}%)`; e.getElementById(k.id) || e.body.appendChild(k); } function n() { e.getElementById(k.id) ? (clearTimeout(m), f = 100, l(), k.style.opacity = '0') : (a(f == 100 ? 0 : f), setTimeout(n, 0)); } function d() {
      k.style.left = `${pageXOffset}px`; k.style.width = `${innerWidth}px`; k.style.top = `${pageYOffset}px`; const a = innerWidth / screen[Math.abs(orientation) == 90 ? 'height' : 'width'] * 2; k.style[h] = `scaleY(${a})`;
    } let k; let g; let h; let f; let m; return {
      init() {
        k = e.createElement('div'); k.id = 'instantclick'; g = e.createElement('div'); g.id = 'instantclick-bar'; g.className = 'instantclick-bar'; k.appendChild(g); let a = ['Webkit', 'Moz', 'O']; h = 'transform'; if (!(h in g.style)) for (var b = 0; b < 3; b++)`${a[b]}Transform` in g.style && (h = `${a[b]}Transform`); let c = 'transition'; if (!(c in g.style)) {
          for (b = 0; b < 3; b++) {
 `${a[b]}Transition` in g.style
&& (c = `-${  a[b].toLowerCase()  }-${  c}`); 
} 
} a = e.createElement('style'); a.innerHTML = `#instantclick{position:${O ? 'absolute' : 'fixed'};top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;${c}:opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;${c}:all .25s}`; e.head.appendChild(a); O && (d(), addEventListener('resize', d), addEventListener('scroll', d));
      },
      start: a,
      done: n,
    };
  }()); const P = 'pushState' in history && (!N.match('Android') || N.match('Chrome/')) && g.protocol != 'file:'; return {
    supported: P,
    init() {
      if (!m) {
        if (P) {
          for (var a = arguments.length - 1; a >= 0; a--) { var c = arguments[a]; !0 === c ? M = !0 : c == 'mousedown' ? A = !0 : typeof c === 'number' && (E = c); }m = v(g.href); f[m] = { body: e.body, title: e.title, scrollY: pageYOffset }; for (var c = e.head.children, b, a = c.length - 1; a >= 0; a--)b = c[a], b.hasAttribute('data-instant-track') && (b = b.getAttribute('href') || b.getAttribute('src') || b.innerHTML, B.push(b)); p = new XMLHttpRequest(); p.addEventListener('readystatechange', T); H(!0); z.init(); t('change', !0); addEventListener('popstate', () => {
            const a = v(g.href); a != m && (a in f ? (f[m].scrollY = pageYOffset, m = a, G(f[a].title, f[a].body, !1, f[a].scrollY)) : g.href = g.href);
          });
        } else t('change', !0);
      }
    },
    on(a, c) { D[a].push(c); },
  };
}(document, location));